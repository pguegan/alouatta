<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        
        <script src="js/lib/angular.min.js" type="text/javascript"></script>
        <script src="js/app.min.js" type="text/javascript"></script>
        
        <style>
            section section {
                padding-top: 10px;
            }
            .loading {
                border:1px solid #F80;
            }            
            .loaded {
                text-decoration: underline;
            }
            .playing {
                font-weight: bold;
            }
            .muted {
                color: #8E8E8E;
            }
            .error {
                border: 1px solid #F00;
            }
        </style>
    </head>
    <body>
        <main ng-app="alouatta" ng-strict-di>
            <alouatta-player title="RIFFX" src="http://stream.myjungly.fr/RIFFX" autoplay="true" volume="0.1" preload="auto">
                <alouatta-controls></alouatta-controls>
                <alouatta-controls type="single-button"></alouatta-controls>
                <alouatta-playlist></alouatta-playlist>
            </alouatta-player>
            
            <script id="templates/track-detail-default.html" type="text/ng-template">
                <section>
                    <span ng-show="vm.track.published_at">{{ vm.track.published_at | date:'shortDate' }} -</span>
                    <span ng-bind="vm.track.title"></span>
                </section>
            </script>
            
            <script id="templates/controls-default.html" type="text/ng-template">
                <section>
                    <h2>Autoplay, 2 buttons</h2>
                    <alouatta-track-detail track="vm.player.currentTrack"></alouatta-track-detail>
                    <button ng-click="vm.play()" ng-disabled="vm.player.isLoading || vm.player.isPlaying">play</button>
                    <button ng-click="vm.pause()" ng-disabled="vm.player.isLoading || !vm.player.isPlaying">pause</button>
                    
                    <label ng-show="vm.player.isLoading" class="loading">Loading...</label><br/>
                    
                    <section>
                        <label>Volume: </label>
                        <input type="number" min="0" max="1" step="0.1" ng-model="vm.player.volume" ng-change="vm.setVolume()" />
                        <button ng-click="vm.toggleMute()" ng-class="{ 'muted': vm.player.muted }">mute</button>
                    </section>
                    
                    <section>
                        <p ng-hide="vm.player.duration">
                            <label>Temps: </label>
                            <span>{{ vm.player.currentTime | number:2 }}s</span>
                        </p>
                        <p ng-show="vm.player.duration">
                            <label>Temps: </label>
                            <input type="number" min="0" ng-model="vm.player.desiredTime" ng-change="vm.setCurrentTime()" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }" />
                            <br />
                            
                            <span>{{ vm.player.currentTime | number:2 }}s</span>
                            /
                            <span>{{ vm.player.duration | number:2 }}</span>
                        </p>
                        <br />
                    </section>
                    
                    <section>
                        <label>Buffered</label>
                        <span ng-repeat="buffer in vm.player.buffered">
                            {{ buffer.start | number:2 }}-{{ buffer.end | number:2 }}
                        </span>
                    </section>
                </section>
            </script>
            
            <script id="templates/controls-single-button.html" type="text/ng-template">
                <section>
                    <h2>Single button</h2>
                    <button ng-click="vm.togglePlay()" ng-class="{ 'playing': vm.player.isPlaying, 'loading': vm.player.isLoading, 'loaded': !vm.player.isLoading, 'error': vm.player.isError }">
                        play/pause
                    </button>
                </section>
            </script>
        
            <script id="templates/playlist-default.html" type="text/ng-template">
                <section>
                    <h2>playlist</h2>
                    
                    <a href ng-click="vm.previousPage()">Prev.</a>
                    -
                    <a href ng-click="vm.nextPage()">Next</a>
                    
                    <ul>
                        <li ng-repeat="track in vm.tracks">
                            {{ track.published_at | date:'shortDate' }} -
                            <a href ng-click="vm.setTrack(track)" title="Play this track">{{ track.title }}</a>
                        </li>
                    </ul>
                    
                    <a href ng-click="vm.previousPage()">Prev.</a>
                    -
                    <a href ng-click="vm.nextPage()">Next</a>                    
                </section>
            </script>
        </main>
    </body>
</html>